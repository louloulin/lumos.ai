# LumosAI å‘å¸ƒé…ç½®æ–‡ä»¶
# ç”¨äºé…ç½®å‘å¸ƒæµç¨‹çš„å„ç§å‚æ•°

[release]
# é¡¹ç›®ä¿¡æ¯
name = "LumosAI"
description = "ä¼ä¸šçº§ AI ä»£ç†æ¡†æ¶"
repository = "https://github.com/louloulin/lumos.ai.git"
homepage = "https://lumosai.dev"
documentation = "https://docs.rs/lumosai"

# ç‰ˆæœ¬ç®¡ç†
version_file = "Cargo.toml"
changelog_file = "CHANGELOG.md"
readme_file = "README.md"

# å‘å¸ƒåˆ†æ”¯
release_branch = "main"
develop_branch = "develop"

# æ ‡ç­¾æ ¼å¼
tag_format = "v{version}"
tag_message = "Release {version}"

# æäº¤ä¿¡æ¯æ ¼å¼
commit_message = "chore: bump version to {version}"

[build]
# æ„å»ºé…ç½®
profile = "release"
features = ["all"]
targets = [
    "x86_64-unknown-linux-gnu",
    "x86_64-pc-windows-msvc", 
    "x86_64-apple-darwin",
    "aarch64-apple-darwin"
]

# æ„å»ºå‰æ£€æŸ¥
pre_build_checks = [
    "cargo fmt --check",
    "cargo clippy -- -D warnings",
    "cargo test --all-features",
    "cargo audit"
]

# æ„å»ºåæ“ä½œ
post_build_actions = [
    "strip_binaries",
    "create_archives",
    "generate_checksums"
]

[publish]
# å‘å¸ƒåˆ° crates.io
crates_io = true
registry = "https://crates.io"

# å‘å¸ƒé¡ºåºï¼ˆæŒ‰ä¾èµ–å…³ç³»ï¼‰
publish_order = [
    "lumos_macro",
    "lumosai_core", 
    "lumosai_vector/core",
    "lumosai_vector",
    "lumosai_evals",
    "lumosai_rag", 
    "lumosai_network",
    "lumosai_cli",
    "lumosai"
]

# å‘å¸ƒé—´éš”ï¼ˆç§’ï¼‰
publish_interval = 30

# å‘å¸ƒé‡è¯•æ¬¡æ•°
max_retries = 3

[github]
# GitHub Release é…ç½®
create_release = true
draft = false
prerelease = false

# Release èµ„äº§
include_assets = [
    "target/release/lumosai*",
    "README.md",
    "LICENSE",
    "CHANGELOG.md"
]

# Release è¯´æ˜æ¨¡æ¿
release_notes_template = """
# LumosAI {version}

## ğŸš€ æ–°åŠŸèƒ½å’Œæ”¹è¿›

{features}

## ğŸ› Bug ä¿®å¤

{fixes}

## ğŸ“ å˜æ›´è®°å½•

{changes}

## ğŸ“¦ å®‰è£…æ–¹å¼

### Cargo
```bash
cargo install lumosai
```

### äºŒè¿›åˆ¶ä¸‹è½½
ä»ä¸‹æ–¹çš„ Assets ä¸­ä¸‹è½½é€‚åˆæ‚¨å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [æ–‡æ¡£](https://docs.rs/lumosai)
- [ç¤ºä¾‹](https://github.com/louloulin/lumos.ai/tree/main/examples)
- [å˜æ›´æ—¥å¿—](https://github.com/louloulin/lumos.ai/blob/main/CHANGELOG.md)
"""

[documentation]
# æ–‡æ¡£é…ç½®
build_docs = true
deploy_docs = true
docs_branch = "gh-pages"
docs_dir = "docs"

# API æ–‡æ¡£
api_docs = true
api_docs_features = ["all"]

# ç¤ºä¾‹æ–‡æ¡£
examples_docs = true

[notifications]
# é€šçŸ¥é…ç½®
slack_webhook = ""
discord_webhook = ""
email_recipients = []

# é€šçŸ¥æ¨¡æ¿
success_message = "ğŸ‰ LumosAI {version} å‘å¸ƒæˆåŠŸï¼"
failure_message = "âŒ LumosAI {version} å‘å¸ƒå¤±è´¥"

[security]
# å®‰å…¨æ£€æŸ¥
security_audit = true
dependency_check = true
vulnerability_scan = true

# ç­¾åé…ç½®
sign_releases = false
gpg_key_id = ""

[quality]
# è´¨é‡æ£€æŸ¥
code_coverage_threshold = 80
performance_regression_check = true
memory_leak_check = true

# åŸºå‡†æµ‹è¯•
run_benchmarks = true
benchmark_comparison = true

[rollback]
# å›æ»šé…ç½®
enable_rollback = true
rollback_timeout = 3600  # 1å°æ—¶

# å›æ»šæ¡ä»¶
rollback_conditions = [
    "critical_bug",
    "security_vulnerability", 
    "performance_regression"
]

[environments]
# ç¯å¢ƒé…ç½®

[environments.staging]
name = "staging"
url = "https://staging.lumosai.dev"
auto_deploy = true
smoke_tests = true

[environments.production]
name = "production" 
url = "https://lumosai.dev"
auto_deploy = false
manual_approval = true
smoke_tests = true
canary_deployment = true

[hooks]
# é’©å­è„šæœ¬

[hooks.pre_release]
# å‘å¸ƒå‰é’©å­
scripts = [
    "scripts/pre-release-check.sh",
    "scripts/update-dependencies.sh"
]

[hooks.post_release]
# å‘å¸ƒåé’©å­
scripts = [
    "scripts/post-release-notify.sh",
    "scripts/update-homebrew.sh"
]

[hooks.on_failure]
# å¤±è´¥æ—¶é’©å­
scripts = [
    "scripts/rollback.sh",
    "scripts/notify-failure.sh"
]

[artifacts]
# æ„å»ºäº§ç‰©é…ç½®

[artifacts.binaries]
# äºŒè¿›åˆ¶æ–‡ä»¶
include = ["lumosai", "lumosai_cli"]
strip = true
compress = true

[artifacts.libraries]
# åº“æ–‡ä»¶
include_static = true
include_dynamic = false

[artifacts.documentation]
# æ–‡æ¡£æ–‡ä»¶
include_api_docs = true
include_examples = true
include_guides = true

[artifacts.packages]
# åŒ…æ–‡ä»¶
formats = ["tar.gz", "zip"]
include_checksums = true
include_signatures = false

[metadata]
# å…ƒæ•°æ®
build_date = true
git_commit = true
git_branch = true
build_environment = true

# è‡ªå®šä¹‰å…ƒæ•°æ®
custom_fields = [
    "rust_version",
    "cargo_version",
    "target_triple"
]
